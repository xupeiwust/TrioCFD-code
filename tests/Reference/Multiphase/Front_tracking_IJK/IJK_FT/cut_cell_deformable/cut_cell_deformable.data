# PARALLEL OK 8 #
# Le decoupage ne fait rien #
# Astuce pour que make_PAR.data trouve deux processeurs de calcul:
Nom_Zones toto 
#
# DEBUT DECOUPAGE
system "touch toto_0000.Zones toto_0001.Zones toto_0002.Zones toto_0003.Zones"
system "touch toto_0004.Zones toto_0005.Zones toto_0006.Zones toto_0007.Zones"
Fin
  FIN DECOUPAGE #

IJK_Grid_Geometry DOM

Lire DOM
{
  nbelem_i 144
  nbelem_j 48
  nbelem_k 48
  uniform_domain_size_i 0.018
  uniform_domain_size_j 0.006
  uniform_domain_size_k 0.006
  perio_i
  perio_j
  origin_i -0.0095
  origin_j -0.003
  origin_k -0.003
}

IJK_Splitting grid_splitting
# DEBUT MAILLAGE #
Lire grid_splitting { ijk_grid_geometry DOM  nproc_i 1  nproc_j 1  nproc_k 1 }
# FIN MAILLAGE #
# DEBUT LECTURE 
Lire grid_splitting { ijk_grid_geometry DOM  nproc_i 2  nproc_j 2  nproc_k 2 }
  FIN LECTURE #

IJK_FT_cut_cell
{
  ijk_splitting grid_splitting
  ijk_splitting_ft_extension 7
  time_scheme euler_explicit
  velocity_convection_op Centre
  Boundary_Conditions {
    bctype_kmin Paroi
    bctype_kmax Paroi
  }
  timestep 100. # large value # 
  timestep_facsec 0.2
  cfl 1
  fo  1
  oh  1

  champs_a_postraiter 3 INDICATRICE TEMPERATURE DIV_LAMBDA_GRAD_T_VOLUME

  check_stop_file stop.txt
  dt_sauvegarde 2000
  nb_pas_dt_max 37
 
  multigrid_solver {
    solver_precision mixed
    coarsen_operators 2
      Coarsen_Operator_Uniform {  }
      Coarsen_Operator_Uniform {  }
    ghost_size 1
    pre_smooth_steps 1 10
    smooth_steps 1 10
    relax_jacobi 1 0.7
    solveur_grossier GCP { seuil 1e-8  precond ssor { omega 1.5 } impr }
    seuil 1e-8
    nb_full_mg_steps 2 4 1
    impr
  }
  terme_force_init 9400
  check_divergence
  gravite 3 -9.81 0. 0. 
  interfaces {
   terme_gravite rho_g
   fichier_reprise_interface init.lata
   timestep_reprise_interface 1
   lata_meshname   FTMESH 
   seuil_indicatrice_petite 0.05
   remaillage_ft_ijk {
     nb_iter_barycentrage 1
     relax_barycentrage 1
     nb_iter_correction_volume 6
     lissage_courbure_iterations_systematique 0
   }
  }
  rho_liquide 1000.
  mu_liquide 1e-3
  rho_vapeur 600
  mu_vapeur 1e-3
  sigma 0.04
  expression_vx_init -0.05
  expression_vy_init 0.
  expression_vz_init 0.

  type_surface_efficace_face conservation_volume
  type_surface_efficace_interface algebrique_simple

 thermals {
  cut_cell {
    verbosite 10
    boundary_conditions {
      bctype_kmin Perio 
      bctype_kmax Perio 
    } 
    lambda_liquid 0.092987
    lambda_vapour 1
    cp_liquid 1.603217
    cp_vapour 1300

    expression_T_init 293.0+80.0*(1.-ff)

    cut_cell_schema_convection quick_ou_amont_perpendicular_distance
    convection_auxiliaire {
      methode_temperature_remplissage ponderation_voisin
      convection_petites_cellules correction_symetrique
    }
    
    diffusion_auxiliaire {
      methode_flux_interface interp_cut_cell
      diffusion_petites_cellules correction_directe
      scaled_distance_flux_interface 1.0
    }
  }
 }
}
Fin 
